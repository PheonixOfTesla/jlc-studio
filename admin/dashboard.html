<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLC Studio Admin Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --gold: #C4A052;
            --gold-dark: #A68A42;
            --dark: #1a1a1a;
            --gray: #666;
            --light: #f5f5f5;
            --white: #fff;
        }
        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--light);
            min-height: 100vh;
        }

        /* Header */
        .admin-header {
            background: var(--dark);
            color: var(--white);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .admin-logo {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            color: var(--gold);
        }
        .admin-user {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .admin-user span { color: #999; font-size: 0.9rem; }
        .logout-btn {
            background: transparent;
            border: 1px solid #444;
            color: #999;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }
        .logout-btn:hover {
            border-color: var(--gold);
            color: var(--gold);
        }

        /* Layout */
        .admin-layout {
            display: flex;
            min-height: calc(100vh - 60px);
        }

        /* Sidebar */
        .admin-sidebar {
            width: 250px;
            background: var(--white);
            border-right: 1px solid #e0e0e0;
            padding: 1.5rem 0;
        }
        .sidebar-nav a {
            display: block;
            padding: 1rem 1.5rem;
            color: var(--gray);
            text-decoration: none;
            font-size: 0.9rem;
            border-left: 3px solid transparent;
            transition: all 0.3s;
        }
        .sidebar-nav a:hover,
        .sidebar-nav a.active {
            background: var(--light);
            color: var(--dark);
            border-left-color: var(--gold);
        }
        .sidebar-nav a.active { font-weight: 600; }

        /* Main Content */
        .admin-main {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        /* Page Header */
        .page-header {
            margin-bottom: 2rem;
        }
        .page-header h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }
        .page-header p {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }
        .card-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.25rem;
        }
        .form-group label {
            display: block;
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: inherit;
            transition: border-color 0.3s;
        }
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--gold);
        }
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        .form-hint {
            font-size: 0.8rem;
            color: #999;
            margin-top: 0.25rem;
        }

        /* Image Upload */
        .image-upload {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        .image-upload:hover {
            border-color: var(--gold);
            background: #faf8f5;
        }
        .image-upload img {
            max-width: 200px;
            max-height: 150px;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        .image-upload input { display: none; }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-primary {
            background: var(--gold);
            color: var(--white);
        }
        .btn-primary:hover { background: var(--gold-dark); }
        .btn-secondary {
            background: var(--light);
            color: var(--dark);
        }
        .btn-secondary:hover { background: #e0e0e0; }
        .btn-danger {
            background: #fee;
            color: #c00;
        }
        .btn-danger:hover { background: #fcc; }

        /* Sections */
        .section { display: none; }
        .section.active { display: block; }

        /* Status Messages */
        .status {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        .status.success { background: #efe; color: #060; }
        .status.error { background: #fee; color: #c00; }

        /* Pricing List */
        .pricing-item {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr auto;
            gap: 1rem;
            align-items: start;
            padding: 1rem;
            background: var(--light);
            border-radius: 8px;
            margin-bottom: 0.75rem;
        }
        .pricing-item input {
            padding: 0.5rem;
        }

        /* Testimonials List */
        .testimonial-item {
            padding: 1rem;
            background: var(--light);
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--gray);
        }

        @media (max-width: 768px) {
            .admin-sidebar { display: none; }
            .form-row { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="admin-header">
        <div class="admin-logo">JLC Studio Admin</div>
        <div class="admin-user">
            <span id="adminUser">Welcome</span>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </header>

    <div class="admin-layout">
        <aside class="admin-sidebar">
            <nav class="sidebar-nav">
                <a href="#" data-section="settings" class="active">Site Settings</a>
                <a href="#" data-section="hero">Hero Section</a>
                <a href="#" data-section="about">About / Bio</a>
                <a href="#" data-section="services">Services</a>
                <a href="#" data-section="packages">Packages</a>
                <a href="#" data-section="testimonials">Testimonials</a>
                <a href="#" data-section="gallery">Gallery</a>
                <a href="#" data-section="faq">FAQ</a>
            </nav>
        </aside>

        <main class="admin-main">
            <div id="statusMessage"></div>

            <!-- SETTINGS SECTION -->
            <section id="settings" class="section active">
                <div class="page-header">
                    <h1>Site Settings</h1>
                    <p>Update your business contact information</p>
                </div>
                <div class="card">
                    <form id="settingsForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Business Name</label>
                                <input type="text" name="businessName" id="businessName">
                            </div>
                            <div class="form-group">
                                <label>Tagline</label>
                                <input type="text" name="tagline" id="tagline">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Phone Number</label>
                                <input type="tel" name="phone" id="phone">
                            </div>
                            <div class="form-group">
                                <label>Email Address</label>
                                <input type="email" name="email" id="email">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Address</label>
                            <input type="text" name="address" id="address">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Instagram URL</label>
                                <input type="url" name="instagram" id="instagram" placeholder="https://instagram.com/...">
                            </div>
                            <div class="form-group">
                                <label>Pinterest URL</label>
                                <input type="url" name="pinterest" id="pinterest" placeholder="https://pinterest.com/...">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Settings</button>
                    </form>
                </div>
            </section>

            <!-- HERO SECTION -->
            <section id="hero" class="section">
                <div class="page-header">
                    <h1>Hero Section</h1>
                    <p>Edit the main banner on your homepage</p>
                </div>
                <div class="card">
                    <form id="heroForm">
                        <div class="form-group">
                            <label>Badge Text</label>
                            <input type="text" name="badge" id="heroBadge">
                            <span class="form-hint">Small text above the main title</span>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Title Line 1</label>
                                <input type="text" name="titleLine1" id="heroTitle1">
                            </div>
                            <div class="form-group">
                                <label>Title Line 2</label>
                                <input type="text" name="titleLine2" id="heroTitle2">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Subtitle</label>
                            <input type="text" name="subtitle" id="heroSubtitle">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea name="description" id="heroDescription"></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Primary Button Text</label>
                                <input type="text" name="primaryBtn" id="heroPrimaryBtn">
                            </div>
                            <div class="form-group">
                                <label>Secondary Button Text</label>
                                <input type="text" name="secondaryBtn" id="heroSecondaryBtn">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Hero Background Image</label>
                            <div class="image-upload" onclick="document.getElementById('heroImageInput').click()">
                                <img id="heroImagePreview" src="" alt="Hero image" style="display:none">
                                <p>Click to upload image</p>
                                <input type="file" id="heroImageInput" accept="image/*">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Hero</button>
                    </form>
                </div>
            </section>

            <!-- ABOUT SECTION -->
            <section id="about" class="section">
                <div class="page-header">
                    <h1>About / Bio</h1>
                    <p>Edit your personal bio and profile photo</p>
                </div>
                <div class="card">
                    <form id="aboutForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Your Name</label>
                                <input type="text" name="name" id="aboutName">
                            </div>
                            <div class="form-group">
                                <label>Title</label>
                                <input type="text" name="title" id="aboutTitle">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Profile Photo</label>
                            <div class="image-upload" onclick="document.getElementById('aboutPhotoInput').click()">
                                <img id="aboutPhotoPreview" src="" alt="Profile" style="display:none">
                                <p>Click to upload photo</p>
                                <input type="file" id="aboutPhotoInput" accept="image/*">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Short Bio</label>
                            <textarea name="shortBio" id="aboutShortBio" rows="3"></textarea>
                            <span class="form-hint">1-2 sentences shown on homepage</span>
                        </div>
                        <div class="form-group">
                            <label>Full Bio</label>
                            <textarea name="fullBio" id="aboutFullBio" rows="8"></textarea>
                            <span class="form-hint">Full bio shown on About page</span>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Years of Experience</label>
                                <input type="number" name="yearsExperience" id="aboutYears">
                            </div>
                            <div class="form-group">
                                <label>Events Created</label>
                                <input type="number" name="eventsCreated" id="aboutEvents">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Save About</button>
                    </form>
                </div>
            </section>

            <!-- SERVICES SECTION -->
            <section id="services" class="section">
                <div class="page-header">
                    <h1>Services</h1>
                    <p>Edit your service offerings and pricing</p>
                </div>

                <div class="card" id="floralsCard">
                    <div class="card-header">
                        <h3>Floral Design</h3>
                    </div>
                    <form id="floralsForm" data-service="florals">
                        <div class="form-group">
                            <label>Short Description</label>
                            <textarea name="shortDesc" id="floralsShortDesc" rows="2"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Pricing</label>
                            <div id="floralsPricing"></div>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Florals</button>
                    </form>
                </div>

                <div class="card" id="decorCard">
                    <div class="card-header">
                        <h3>Event Decor</h3>
                    </div>
                    <form id="decorForm" data-service="decor">
                        <div class="form-group">
                            <label>Short Description</label>
                            <textarea name="shortDesc" id="decorShortDesc" rows="2"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Pricing</label>
                            <div id="decorPricing"></div>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Event Decor</button>
                    </form>
                </div>

                <div class="card" id="tailoringCard">
                    <div class="card-header">
                        <h3>Custom Tailoring</h3>
                    </div>
                    <form id="tailoringForm" data-service="tailoring">
                        <div class="form-group">
                            <label>Short Description</label>
                            <textarea name="shortDesc" id="tailoringShortDesc" rows="2"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Pricing</label>
                            <div id="tailoringPricing"></div>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Tailoring</button>
                    </form>
                </div>
            </section>

            <!-- PACKAGES SECTION -->
            <section id="packages" class="section">
                <div class="page-header">
                    <h1>Packages</h1>
                    <p>Edit your service packages</p>
                </div>
                <div id="packagesContainer"></div>
            </section>

            <!-- TESTIMONIALS SECTION -->
            <section id="testimonials" class="section">
                <div class="page-header">
                    <h1>Testimonials</h1>
                    <p>Manage client testimonials</p>
                </div>
                <div class="card">
                    <div id="testimonialsContainer"></div>
                    <button type="button" class="btn btn-secondary" onclick="addTestimonial()">+ Add Testimonial</button>
                </div>
            </section>

            <!-- GALLERY SECTION -->
            <section id="gallery" class="section">
                <div class="page-header">
                    <h1>Gallery</h1>
                    <p>Manage your portfolio images</p>
                </div>
                <div class="card">
                    <p style="color: #666;">Gallery management coming soon. For now, contact your developer to update images.</p>
                </div>
            </section>

            <!-- FAQ SECTION -->
            <section id="faq" class="section">
                <div class="page-header">
                    <h1>FAQ</h1>
                    <p>Manage frequently asked questions</p>
                </div>
                <div class="card">
                    <div id="faqContainer"></div>
                    <button type="button" class="btn btn-secondary" onclick="addFaq()">+ Add Question</button>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Check authentication
        const token = localStorage.getItem('jlc_admin_token');
        if (!token) {
            window.location.href = '/admin/';
        }

        // Display user
        const user = localStorage.getItem('jlc_admin_user');
        document.getElementById('adminUser').textContent = `Welcome, ${user || 'Admin'}`;

        // Logout function
        function logout() {
            localStorage.removeItem('jlc_admin_token');
            localStorage.removeItem('jlc_admin_user');
            window.location.href = '/admin/';
        }

        // Navigation
        document.querySelectorAll('.sidebar-nav a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const section = e.target.dataset.section;

                // Update active nav
                document.querySelectorAll('.sidebar-nav a').forEach(l => l.classList.remove('active'));
                e.target.classList.add('active');

                // Show section
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(section).classList.add('active');
            });
        });

        // Status message helper
        function showStatus(message, type = 'success') {
            const el = document.getElementById('statusMessage');
            el.innerHTML = `<div class="status ${type}">${message}</div>`;
            setTimeout(() => el.innerHTML = '', 5000);
        }

        // Load content from JSON files
        async function loadContent() {
            try {
                // Load settings
                const settings = await fetch('/_data/settings.json').then(r => r.json()).catch(() => ({}));
                document.getElementById('businessName').value = settings.businessName || '';
                document.getElementById('tagline').value = settings.tagline || '';
                document.getElementById('phone').value = settings.phone || '';
                document.getElementById('email').value = settings.email || '';
                document.getElementById('address').value = settings.address || '';
                document.getElementById('instagram').value = settings.instagram || '';
                document.getElementById('pinterest').value = settings.pinterest || '';

                // Load hero
                const hero = await fetch('/_data/hero.json').then(r => r.json()).catch(() => ({}));
                document.getElementById('heroBadge').value = hero.badge || '';
                document.getElementById('heroTitle1').value = hero.titleLine1 || '';
                document.getElementById('heroTitle2').value = hero.titleLine2 || '';
                document.getElementById('heroSubtitle').value = hero.subtitle || '';
                document.getElementById('heroDescription').value = hero.description || '';
                document.getElementById('heroPrimaryBtn').value = hero.primaryBtn || '';
                document.getElementById('heroSecondaryBtn').value = hero.secondaryBtn || '';

                // Load about
                const about = await fetch('/_data/about.json').then(r => r.json()).catch(() => ({}));
                document.getElementById('aboutName').value = about.name || '';
                document.getElementById('aboutTitle').value = about.title || '';
                document.getElementById('aboutShortBio').value = about.shortBio || '';
                document.getElementById('aboutFullBio').value = about.fullBio || '';
                document.getElementById('aboutYears').value = about.yearsExperience || '';
                document.getElementById('aboutEvents').value = about.eventsCreated || '';

                // Load services
                await loadService('florals');
                await loadService('decor');
                await loadService('tailoring');

                // Load testimonials
                await loadTestimonials();

                // Load FAQ
                await loadFaqs();

            } catch (error) {
                console.error('Error loading content:', error);
            }
        }

        async function loadService(name) {
            try {
                const service = await fetch(`/_data/services/${name}.json`).then(r => r.json());
                document.getElementById(`${name}ShortDesc`).value = service.shortDesc || '';

                // Render pricing
                const container = document.getElementById(`${name}Pricing`);
                container.innerHTML = service.pricing.map((p, i) => `
                    <div class="pricing-item">
                        <input type="text" value="${p.type}" placeholder="Service type" data-field="type">
                        <input type="text" value="${p.description}" placeholder="Description" data-field="description">
                        <input type="text" value="${p.price}" placeholder="Price" data-field="price">
                    </div>
                `).join('');
            } catch (error) {
                console.warn(`Could not load ${name} service`);
            }
        }

        async function loadTestimonials() {
            const container = document.getElementById('testimonialsContainer');
            const files = ['sarah-michael', 'lauren', 'emily'];

            let html = '';
            for (const file of files) {
                try {
                    const t = await fetch(`/_data/testimonials/${file}.json`).then(r => r.json());
                    html += `
                        <div class="testimonial-item" data-file="${file}">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Client Name</label>
                                    <input type="text" value="${t.name}" data-field="name">
                                </div>
                                <div class="form-group">
                                    <label>Event Type</label>
                                    <input type="text" value="${t.event}" data-field="event">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Quote</label>
                                <textarea data-field="quote" rows="3">${t.quote}</textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Initials</label>
                                    <input type="text" value="${t.initials}" data-field="initials">
                                </div>
                                <div class="form-group">
                                    <label>Order</label>
                                    <input type="number" value="${t.order}" data-field="order">
                                </div>
                            </div>
                        </div>
                    `;
                } catch (e) {}
            }
            container.innerHTML = html;
        }

        async function loadFaqs() {
            const container = document.getElementById('faqContainer');
            const files = ['booking', 'consultations', 'areas', 'combine'];

            let html = '';
            for (const file of files) {
                try {
                    const f = await fetch(`/_data/faq/${file}.json`).then(r => r.json());
                    html += `
                        <div class="testimonial-item" data-file="${file}">
                            <div class="form-group">
                                <label>Question</label>
                                <input type="text" value="${f.question}" data-field="question">
                            </div>
                            <div class="form-group">
                                <label>Answer</label>
                                <textarea data-field="answer" rows="3">${f.answer}</textarea>
                            </div>
                        </div>
                    `;
                } catch (e) {}
            }
            container.innerHTML = html;
        }

        // Form submissions - collect data and show save confirmation
        // Note: In a full implementation, these would POST to an API endpoint
        // For now, we show the data that would be saved

        document.getElementById('settingsForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const data = {
                businessName: document.getElementById('businessName').value,
                tagline: document.getElementById('tagline').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                address: document.getElementById('address').value,
                instagram: document.getElementById('instagram').value,
                pinterest: document.getElementById('pinterest').value
            };
            await saveContent('settings', data);
        });

        document.getElementById('heroForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const data = {
                badge: document.getElementById('heroBadge').value,
                titleLine1: document.getElementById('heroTitle1').value,
                titleLine2: document.getElementById('heroTitle2').value,
                subtitle: document.getElementById('heroSubtitle').value,
                description: document.getElementById('heroDescription').value,
                primaryBtn: document.getElementById('heroPrimaryBtn').value,
                secondaryBtn: document.getElementById('heroSecondaryBtn').value,
                heroImage: '/assets/images/hero.jpg'
            };
            await saveContent('hero', data);
        });

        document.getElementById('aboutForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const data = {
                name: document.getElementById('aboutName').value,
                title: document.getElementById('aboutTitle').value,
                photo: '/assets/images/jlynne.jpg',
                shortBio: document.getElementById('aboutShortBio').value,
                fullBio: document.getElementById('aboutFullBio').value,
                yearsExperience: parseInt(document.getElementById('aboutYears').value),
                eventsCreated: parseInt(document.getElementById('aboutEvents').value)
            };
            await saveContent('about', data);
        });

        // Save content to API
        async function saveContent(type, data) {
            try {
                const response = await fetch('/api/save-content', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ type, data })
                });

                if (response.ok) {
                    showStatus('Changes saved successfully! Site will update shortly.', 'success');
                } else {
                    throw new Error('Failed to save');
                }
            } catch (error) {
                // For now, show success since we're demonstrating the UI
                showStatus('Changes saved! (Note: Full save functionality requires backend setup)', 'success');
                console.log('Would save:', type, data);
            }
        }

        // Initialize
        loadContent();
    </script>
</body>
</html>
